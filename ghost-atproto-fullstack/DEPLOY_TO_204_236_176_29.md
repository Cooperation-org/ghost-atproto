# Deploy to Server 204.236.176.29

## üöÄ Deployment Commands

### 1. Connect to Your Server
```bash
ssh -i ghostsky.pem ubuntu@204.236.176.29
# or if you use root:
# ssh -i ghostsky.pem root@204.236.176.29
```

### 2. Deploy Frontend Changes
```bash
# Once connected to your server
cd ~/ghost-atproto/ghost-atproto-fullstack

# Pull the latest changes (including our crypto fixes)
git pull origin main

# Update frontend
cd frontend
npm ci
npm run build

# Restart frontend service
pm2 restart atproto-frontend
```

### 3. Deploy Enhanced Nginx Configuration
```bash
# Update nginx configuration to fix static asset loading
sudo cp backend/nginx-bridge-enhanced.conf /etc/nginx/sites-available/default

# Test configuration
sudo nginx -t

# If test passes, reload nginx
sudo systemctl reload nginx
```

### 4. Verify Deployment
```bash
# Check services are running
pm2 list

# Check logs for any errors
pm2 logs atproto-frontend --lines 20

# Check nginx status
sudo systemctl status nginx
```

## üîç Test the Fixes

After deployment, test at: **http://204.236.176.29/bridge/login**

### What to Check:
1. **Browser Console**: No more `crypto.randomUUID` errors
2. **Network Tab**: No 400/404 errors for static assets
3. **Login Page**: Should load without JavaScript errors
4. **Application**: Should function normally

## üÜò If You Encounter Issues

### Check Logs:
```bash
# Frontend logs
pm2 logs atproto-frontend

# Nginx logs
sudo tail -f /var/log/nginx/error.log

# System logs
sudo journalctl -u nginx -f
```

### Restart Services:
```bash
pm2 restart all
sudo systemctl reload nginx
```

## ‚úÖ What These Fixes Address

1. **Crypto.randomUUID Errors**: Polyfill system prevents browser compatibility issues
2. **Static Asset Loading**: Enhanced nginx config fixes 400 Bad Request errors
3. **Chunk Loading Failures**: Proper routing for Next.js static files

The fixes are ready to deploy!
